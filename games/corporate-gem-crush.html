<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corporate Gem Crush ‚Äî HuckFinn Games</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><filter id='glow'><feGaussianBlur stdDeviation='3' result='blur'/><feFlood flood-color='%23c9a227' flood-opacity='0.4'/><feComposite in2='blur' operator='in'/><feMerge><feMergeNode/><feMergeNode in='SourceGraphic'/></feMerge></filter></defs><rect width='100' height='100' fill='%231a1a1a'/><text x='50' y='72' font-family='UnifrakturMaguntia,serif' font-size='80' fill='%23f5f2e8' text-anchor='middle' filter='url(%23glow)'>H</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;0,900;1,400&family=Libre+Franklin:wght@400;500;600;700&family=UnifrakturMaguntia&display=swap" rel="stylesheet">
    <style>
        :root {
            --cream: #f5f2e8;
            --ink: #1a1a1a;
            --accent: #8b0000;
            --gold: #c9a227;
            --rule: #2a2a2a;
            --gray: #666;
            --light-gray: #d4d0c5;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #d4cec0;
            font-family: 'Libre Franklin', sans-serif;
            color: var(--ink);
            line-height: 1.5;
        }

        .newspaper-page {
            max-width: 900px;
            margin: 20px auto;
            background: var(--cream);
            padding: 40px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .newspaper-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
            opacity: 0.03;
            pointer-events: none;
        }

        /* Masthead */
        .masthead {
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px double var(--rule);
            margin-bottom: 20px;
        }

        .masthead-title {
            font-family: 'UnifrakturMaguntia', serif;
            font-size: 72px;
            color: var(--ink);
            letter-spacing: 2px;
        }

        .masthead-title a {
            color: inherit;
            text-decoration: none;
        }

        .masthead-tagline {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 14px;
            color: var(--gray);
            margin-top: 5px;
        }

        .masthead-info {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gray);
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid var(--light-gray);
        }

        /* Navigation */
        .nav-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
            margin-bottom: 30px;
        }

        .nav-links a {
            color: var(--ink);
            text-decoration: none;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: var(--gold);
        }

        /* Page Header */
        .page-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .page-header h1 {
            font-family: 'Playfair Display', serif;
            font-size: 48px;
            font-weight: 900;
            color: var(--ink);
            margin-bottom: 10px;
        }

        .page-header .subtitle {
            font-family: 'Playfair Display', serif;
            font-style: italic;
            font-size: 18px;
            color: var(--gray);
        }

        /* Game Section */
        .game-section {
            padding: 30px;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 3px solid var(--gold);
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .game-section h3 {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            color: var(--gold);
            text-align: center;
            margin-bottom: 10px;
        }

        .game-section .game-subtitle {
            color: #888;
            text-align: center;
            margin-bottom: 20px;
            font-style: italic;
        }

        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .game-stats {
            display: flex;
            gap: 40px;
            color: #fff;
            font-weight: 700;
        }

        .game-stats div {
            text-align: center;
        }

        .game-stats .label {
            font-size: 0.75rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .game-stats .value {
            font-size: 1.8rem;
            color: var(--gold);
        }

        .game-board {
            display: grid;
            grid-template-columns: repeat(8, 45px);
            grid-template-rows: repeat(8, 45px);
            gap: 3px;
            background: #333;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .gem-cell {
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            background: #222;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            user-select: none;
        }

        .gem-cell:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(201, 162, 39, 0.5);
        }

        .gem-cell.selected {
            transform: scale(1.15);
            box-shadow: 0 0 20px rgba(201, 162, 39, 0.8);
            animation: selectedPulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes selectedPulse {
            from { box-shadow: 0 0 20px rgba(201, 162, 39, 0.8); }
            to { box-shadow: 0 0 30px rgba(201, 162, 39, 1); }
        }

        .gem-cell.matched {
            animation: matchPop 0.4s ease-out forwards;
        }

        @keyframes matchPop {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4) rotate(180deg); }
            100% { transform: scale(0); opacity: 0; }
        }

        .gem-cell.falling {
            animation: gemFall 0.3s ease-in;
        }

        @keyframes gemFall {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .gem-cell.invalid-move {
            animation: shake 0.3s ease-in-out;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .game-controls {
            display: flex;
            gap: 15px;
        }

        .game-btn {
            background: var(--gold);
            color: var(--ink);
            border: none;
            padding: 12px 25px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .game-btn:hover {
            background: #fff;
            transform: translateY(-2px);
        }

        .combo-display {
            color: var(--gold);
            font-size: 1.5rem;
            font-weight: 700;
            min-height: 40px;
            text-align: center;
        }

        .combo-display.active {
            animation: comboFlash 0.5s ease-out;
        }

        @keyframes comboFlash {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); color: #fff; }
            100% { transform: scale(1); }
        }

        /* How to Play */
        .how-to-play {
            background: #fff;
            border: 1px solid var(--light-gray);
            padding: 25px;
            margin-top: 30px;
        }

        .how-to-play h3 {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            margin-bottom: 15px;
            color: var(--ink);
        }

        .how-to-play ul {
            margin-left: 20px;
        }

        .how-to-play li {
            margin-bottom: 10px;
            color: var(--gray);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding-top: 20px;
            margin-top: 30px;
            border-top: 1px solid var(--light-gray);
            font-size: 12px;
            color: var(--gray);
        }

        .footer a {
            color: var(--gold);
            text-decoration: none;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .newspaper-page {
                margin: 10px;
                padding: 20px;
            }

            .masthead-title {
                font-size: 48px;
            }

            .page-header h1 {
                font-size: 32px;
            }

            .game-board {
                grid-template-columns: repeat(8, 36px);
                grid-template-rows: repeat(8, 36px);
            }

            .gem-cell {
                width: 36px;
                height: 36px;
                font-size: 22px;
            }

            .game-stats {
                gap: 20px;
            }

            .nav-links {
                gap: 15px;
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="newspaper-page">
        <header class="masthead">
            <div class="masthead-title"><a href="../index.html">HuckFinn</a></div>
            <div class="masthead-tagline">"All the news that's fit to satirize"</div>
            <div class="masthead-info">
                <span>Games Section</span>
                <span>Est. 2025</span>
                <span>Price: Your Sanity</span>
            </div>
        </header>

        <nav class="nav-links">
            <a href="../index.html">Home</a>
            <a href="../huckfinn-article-index.html">Articles</a>
            <a href="index.html">Games</a>
        </nav>

        <div class="page-header">
            <h1>Corporate Gem Crush</h1>
            <p class="subtitle">Match 3 gems to suppress your authentic reactions!</p>
        </div>

        <section class="game-section" id="game-section">
            <h3>üíé CORPORATE GEM CRUSH üíé</h3>
            <p class="game-subtitle">Every combo increases your Professional Hollowness Score‚Ñ¢</p>

            <div class="game-container">
                <div class="game-stats">
                    <div>
                        <div class="label">Score</div>
                        <div class="value" id="score">0</div>
                    </div>
                    <div>
                        <div class="label">Moves</div>
                        <div class="value" id="moves">30</div>
                    </div>
                    <div>
                        <div class="label">Hollowness</div>
                        <div class="value" id="hollowness">0%</div>
                    </div>
                </div>

                <div class="combo-display" id="combo-display"></div>

                <div class="game-board" id="game-board"></div>

                <div class="game-controls">
                    <button class="game-btn" onclick="initGame()">üîÑ New Game</button>
                    <button class="game-btn" onclick="shuffleBoard()">üîÄ Shuffle</button>
                </div>
            </div>
        </section>

        <div class="how-to-play">
            <h3>üìã How To Play (Per HR Guidelines)</h3>
            <ul>
                <li><strong>Click a gem</strong> to select it, then <strong>click an adjacent gem</strong> to swap them</li>
                <li>Match <strong>3 or more identical gems</strong> in a row or column to score points</li>
                <li>Chain reactions increase your <strong>combo multiplier</strong> and Professional Hollowness Score‚Ñ¢</li>
                <li>You have <strong>30 moves</strong> to achieve maximum workplace neutrality</li>
                <li>Score over 500 points to be considered for <strong>senior management</strong></li>
            </ul>
        </div>

        <div class="footer">
            <p>HuckFinn Games ‚Äî Where productivity goes to die, professionally.</p>
            <p><a href="index.html">‚Üê Back to Games</a> | <a href="../index.html">Home</a></p>
        </div>
    </div>

    <script>
        // GEM GAME LOGIC
        const GEMS = ['üíé', 'üîÆ', 'üíÄ', 'üé≠', 'üìä', 'üíº', 'ü§ê', '‚ú®'];
        const BOARD_SIZE = 8;
        const COMBO_MESSAGES = [
            "Professional! üòê",
            "Synergy Achieved! üìà",
            "Authentic Self: Suppressed! üé≠",
            "HR Approved! ‚úÖ",
            "Emotion Contained! ü§ê",
            "Team Player! üèÜ",
            "Personality: Offline! üíÄ",
            "Thanksgiving-Level Combo! ü¶É"
        ];

        let board = [];
        let selectedCell = null;
        let score = 0;
        let moves = 30;
        let isAnimating = false;

        function initGame() {
            board = [];
            selectedCell = null;
            score = 0;
            moves = 30;
            isAnimating = false;

            // Create board without initial matches
            for (let row = 0; row < BOARD_SIZE; row++) {
                board[row] = [];
                for (let col = 0; col < BOARD_SIZE; col++) {
                    let gem;
                    do {
                        gem = GEMS[Math.floor(Math.random() * GEMS.length)];
                    } while (wouldCreateMatch(row, col, gem));
                    board[row][col] = gem;
                }
            }

            renderBoard();
            updateStats();
        }

        function wouldCreateMatch(row, col, gem) {
            // Check horizontal
            if (col >= 2 && board[row][col-1] === gem && board[row][col-2] === gem) {
                return true;
            }
            // Check vertical
            if (row >= 2 && board[row-1] && board[row-1][col] === gem &&
                board[row-2] && board[row-2][col] === gem) {
                return true;
            }
            return false;
        }

        function renderBoard() {
            const boardEl = document.getElementById('game-board');
            boardEl.innerHTML = '';

            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'gem-cell';
                    cell.textContent = board[row][col];
                    cell.dataset.row = row;
                    cell.dataset.col = col;
                    cell.onclick = () => handleCellClick(row, col);

                    if (selectedCell && selectedCell.row === row && selectedCell.col === col) {
                        cell.classList.add('selected');
                    }

                    boardEl.appendChild(cell);
                }
            }
        }

        function handleCellClick(row, col) {
            if (isAnimating || moves <= 0) return;

            if (!selectedCell) {
                selectedCell = { row, col };
                renderBoard();
            } else {
                const isAdjacent = (
                    (Math.abs(selectedCell.row - row) === 1 && selectedCell.col === col) ||
                    (Math.abs(selectedCell.col - col) === 1 && selectedCell.row === row)
                );

                if (isAdjacent) {
                    swapGems(selectedCell.row, selectedCell.col, row, col);
                } else {
                    // Select new cell
                    selectedCell = { row, col };
                    renderBoard();
                }
            }
        }

        async function swapGems(row1, col1, row2, col2) {
            isAnimating = true;

            // Swap
            const temp = board[row1][col1];
            board[row1][col1] = board[row2][col2];
            board[row2][col2] = temp;

            renderBoard();

            const matches = findMatches();

            if (matches.length > 0) {
                moves--;
                await processMatches();
            } else {
                // Swap back - invalid move
                await sleep(200);
                board[row2][col2] = board[row1][col1];
                board[row1][col1] = temp;

                // Show invalid animation
                const cells = document.querySelectorAll('.gem-cell');
                cells.forEach(cell => {
                    const r = parseInt(cell.dataset.row);
                    const c = parseInt(cell.dataset.col);
                    if ((r === row1 && c === col1) || (r === row2 && c === col2)) {
                        cell.classList.add('invalid-move');
                    }
                });

                await sleep(300);
                renderBoard();
            }

            selectedCell = null;
            isAnimating = false;
            updateStats();
        }

        function findMatches() {
            const matches = new Set();

            // Horizontal matches
            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE - 2; col++) {
                    if (board[row][col] &&
                        board[row][col] === board[row][col+1] &&
                        board[row][col] === board[row][col+2]) {
                        matches.add(`${row},${col}`);
                        matches.add(`${row},${col+1}`);
                        matches.add(`${row},${col+2}`);
                    }
                }
            }

            // Vertical matches
            for (let row = 0; row < BOARD_SIZE - 2; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    if (board[row][col] &&
                        board[row][col] === board[row+1][col] &&
                        board[row][col] === board[row+2][col]) {
                        matches.add(`${row},${col}`);
                        matches.add(`${row+1},${col}`);
                        matches.add(`${row+2},${col}`);
                    }
                }
            }

            return Array.from(matches).map(s => {
                const [r, c] = s.split(',');
                return { row: parseInt(r), col: parseInt(c) };
            });
        }

        async function processMatches() {
            let comboCount = 0;

            while (true) {
                const matches = findMatches();
                if (matches.length === 0) break;

                comboCount++;
                score += matches.length * 10 * comboCount;

                // Show combo message
                showCombo(comboCount);

                // Animate matches
                const cells = document.querySelectorAll('.gem-cell');
                matches.forEach(({row, col}) => {
                    cells.forEach(cell => {
                        if (parseInt(cell.dataset.row) === row && parseInt(cell.dataset.col) === col) {
                            cell.classList.add('matched');
                        }
                    });
                });

                await sleep(400);

                // Remove matched gems
                matches.forEach(({row, col}) => {
                    board[row][col] = null;
                });

                // Drop gems
                await dropGems();

                // Fill empty spaces
                await fillEmpty();

                renderBoard();
                updateStats();
                await sleep(200);
            }
        }

        async function dropGems() {
            for (let col = 0; col < BOARD_SIZE; col++) {
                let emptyRow = BOARD_SIZE - 1;

                for (let row = BOARD_SIZE - 1; row >= 0; row--) {
                    if (board[row][col] !== null) {
                        if (row !== emptyRow) {
                            board[emptyRow][col] = board[row][col];
                            board[row][col] = null;
                        }
                        emptyRow--;
                    }
                }
            }

            renderBoard();

            // Add falling animation to cells
            const cells = document.querySelectorAll('.gem-cell');
            cells.forEach(cell => {
                if (cell.textContent) {
                    cell.classList.add('falling');
                }
            });

            await sleep(300);
        }

        async function fillEmpty() {
            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    if (board[row][col] === null) {
                        board[row][col] = GEMS[Math.floor(Math.random() * GEMS.length)];
                    }
                }
            }

            renderBoard();

            const cells = document.querySelectorAll('.gem-cell');
            cells.forEach(cell => {
                cell.classList.add('falling');
            });

            await sleep(300);
        }

        function showCombo(count) {
            const comboEl = document.getElementById('combo-display');
            const message = COMBO_MESSAGES[Math.min(count - 1, COMBO_MESSAGES.length - 1)];
            comboEl.textContent = count > 1 ? `${count}x COMBO! ${message}` : message;
            comboEl.classList.remove('active');
            void comboEl.offsetWidth; // Trigger reflow
            comboEl.classList.add('active');
        }

        function updateStats() {
            document.getElementById('score').textContent = score;
            document.getElementById('moves').textContent = moves;
            document.getElementById('hollowness').textContent = Math.min(100, Math.floor(score / 50)) + '%';

            if (moves <= 0) {
                setTimeout(() => {
                    alert(`Game Over! Final Score: ${score}\nProfessional Hollowness: ${Math.min(100, Math.floor(score / 50))}%\n\n${score > 500 ? "You're ready for senior management!" : "Keep suppressing those authentic reactions!"}`);
                }, 500);
            }
        }

        function shuffleBoard() {
            if (isAnimating) return;

            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    board[row][col] = GEMS[Math.floor(Math.random() * GEMS.length)];
                }
            }

            // Make sure no initial matches
            while (findMatches().length > 0) {
                for (let row = 0; row < BOARD_SIZE; row++) {
                    for (let col = 0; col < BOARD_SIZE; col++) {
                        board[row][col] = GEMS[Math.floor(Math.random() * GEMS.length)];
                    }
                }
            }

            renderBoard();
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Initialize game on load
        initGame();
    </script>
</body>
</html>
